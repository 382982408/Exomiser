<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html lang="en" 
      xmlns="http://www.w3.org/1999/xhtml"
      xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>Analysis Settings</title>
        <meta charset="UTF-8"/>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <link rel="stylesheet" type="text/css" media="all" href="../../resources/bootstrap-3.2.0/css/bootstrap.min.css" th:href="@{resources/bootstrap-3.2.0/css/bootstrap.min.css}"/>
    </head>

    <body>

        <div class="container">
            <h1>Exomiser Analysis Options</h1>
            <form role="form" id="configure-analysis" action="submit" method="POST" accept-charset="utf-8" enctype="multipart/form-data">
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title"><span class="glyphicon glyphicon-floppy-open"/> Upload Sample Files</h3>
                    </div>
                    <div class="panel-body">
                        <div class="col-sm-4">
                            <div class="input-group">
                                <label for="vcf">VCF file:</label>
                                <input type="file" draggable="true" name="vcf" id="vcf"/>

                                <p class="help-block"><em>Required.</em> Upload exome sequencing results in VCF format. 
                                    <a href="/resources/databases/exomiser/query/public/Pfeiffer.vcf">Example file</a> with causative FGFR2 
                                    variant for the autosomal dominant Pfeiffer syndrome added to exome of a
                                    <a href="http://manuelcorpas.com/2012/02/06/my-personal-exome-analysis-part-i-first-findings">healthy individual</a>
                                </p>
                            </div>
                        </div>
                        <div class="col-sm-4"></div>
                        <div class="col-sm-4">
                            <div class="input-group">
                                <label for="ped">PED file:</label>
                                <input type="file" draggable="true" name="ped" id="ped"/>
                                <p class="help-block">Only required for multi-sample VCF files</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title"><span class="glyphicon glyphicon-tasks"/> Enter Analysis Criteria</h3>
                    </div>
                    <div class="panel-body">

                        <div class="col-sm-4">
                            <div class="form-group">
                                <label for="omimid">Associated Mendelian disease:</label>
                                <div class="input-group" id="disease-selector">
                                    <input class="form-control" autocomplete="off" type="text" id="omimid" placeholder="PFEIFFER SYNDROME"/>
                                    <!--<input class="mediumlong james {url:'/resources/databases/exomiser/query/form/autocomplete',varname:'term',minlength:1}" name="omimid" id="omimid" type="text" autocomplete="off" placeholder="PFEIFFER SYNDROME"/>-->
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <label><em>OR</em></label>
                        </div>
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label for="hpo">Clinical phenotypes:</label>
                                <div class="input-group">
                                    <input class="typeahead" autocomplete="off" type="text" name="hpo" id="hpo" placeholder="Craniosynostosis, Malar flattening, Wide nasal bridge"/>
                                    <!--                            <input class="form-control" type="text" name="hpo" id="hpo" placeholder="Craniosynostosis, Malar flattening, Wide nasal bridge"></input>
                                                                                                                    <input name="hpo" id="hpo" type="text" autocomplete="off" class="medium james {url:'/resources/databases/exomiser/query/form/autocomplete2',varname:'term',restricted:1,minlength:1,multiple:1,keydelay:100}" placeholder="Craniosynostosis, Malar flattening, Wide nasal bridge"/>-->
                                    <p class="help-block">Input terms from the <a href="http://www.human-phenotype-ontology.org/">HPO</a></p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title"><span class="glyphicon glyphicon-filter"/> Set Filtering Parameters</h3>
                    </div>
                    <div class="panel-body">
                        <div class="col-sm-4">
                            <div class="form-group">
                                <label for="quality">Minimum variant call quality:</label>
                                <div class="input-group">
                                    <span class="input-group-addon">Phred</span>
                                    <input class="form-control" type="text" name="quality" id="quality" placeholder="30.0"/>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4">  
                            <div class="form-group">
                                <label for="interval">Genetic interval:</label>
                                <div class="input-group">
                                    <span class="input-group-addon">Chr</span>
                                    <input class="form-control" type="text" name="interval" id="interval" placeholder="1:12339-3242525"/>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4">  
                            <div class="form-group">
                                <label for="frequency">Maximum minor allele frequency:</label>
                                <div class="input-group">
                                    <span class="input-group-addon">MAF</span>
                                    <input class="form-control" type="text" name="frequency" id="frequency" value="1.0"/>
                                    <span class="input-group-addon">%</span>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="input-group">
                                <label for="remove-dbsnp">Remove all dbSNP variants: </label>
                                <select name="remove-dbsnp" id="remove-dbsnp" data-toggle="dropdown" class="dropdown">
                                    <option selected="true" value="false">False</option>
                                    <option value="true">True</option>                               
                                </select>
                            </div>
                            <div class="input-group">
                                <label for="remove-off-target">Remove off-target variants: </label>
                                <select name="remove-off-target" id="remove-off-target" data-toggle="dropdown" class="dropdown">
                                    <option selected="true" value="true">True</option>                               
                                    <option value="false">False</option>
                                </select>
                            </div>
                        </div>
                        <div class="col-sm-4">
                            <div class="input-group">
                                <label for="remove-non-pathogenic">Remove non-pathogenic variants: </label>
                                <select name="remove-non-pathogenic" id="remove-non-pathogenic" data-toggle="dropdown" class="dropdown">
                                    <option selected="true" value="false">False</option>
                                    <option value="true">True</option>                                
                                </select>
                            </div>

                            <div class="input-group">
                                <label for="inheritance">Inheritance model: </label>
                                <select name="inheritance" id="inheritance" data-toggle="dropdown" class="dropdown">
                                    <option selected="true" value="UNINITIALIZED">None</option>
                                    <option value="AUTOSOMAL_DOMINANT">Autosomal dominant</option>
                                    <option value="AUTOSOMAL_RECESSIVE">Autosomal recessive</option>
                                    <option value="X_RECESSIVE">X-linked</option>
                                </select>
                            </div>
                        </div>  
                    </div> 
                </div>
                <div class="panel panel-default">
                    <div class="panel-heading">
                        <h3 class="panel-title"><span class="glyphicon glyphicon-sort"/> Choose Prioritiser</h3>
                    </div>
                    <div class="panel-body">
                        <div class="input-group">
                            <label for="prioritiser">Prioritise genes using:</label>

                            <select name="prioritiser" id="prioritiser_dropdown" class="_dropdown">
                                <option selected="true" value="EXOMISER_MOUSE_PRIORITY">Exomiser v1</option>
                                <option value="EXOMISER_ALLSPECIES_PRIORITY">Exomiser v2</option>
                            </select>
                        </div>
                    </div> 
                </div>
                <div>
                    <button type="reset" class="btn btn-default" id="button_form_reset" name="reset" value="Reset">
                        <span class="glyphicon glyphicon-refresh"></span> Reset
                    </button>
                    <button type="submit" class="btn btn-primary" id="button_form_submit" name="submit" value="Submit">
                        <span class="glyphicon glyphicon-thumbs-up"></span> Submit
                    </button>
                    <p class="help-block">Need more info? Try the <a href="/resources/databases/exomiser/query/public/Tutorial.pdf">Tutorial</a></p>
                </div>
            </form>
        </div>
        <script type="text/javascript" src="resources/bootstrap-3.2.0/js/jquery-2.1.1.min.js" th:href="@{resources/bootstrap-3.2.0/js/jquery-2.1.1.min}"/>
        <script type="text/javascript" src="resources/bootstrap-3.2.0/js/bootstrap.min.js" th:href="@{resources/bootstrap-3.2.0/js/bootstrap.min.js}"/>
        <script type="text/javascript" src="resources/bootstrap-3.2.0/js/typeahead.bundle.min.js" th:href="@{resources/bootstrap-3.2.0/js/typeahead.bundle.min.js}"/>

    
        <script>

            var diseases = ['Pfeiffer Syndrome Type 1', 'Pfeiffer Syndrome', 'Pfeiffer Syndrome Type 1'];

            // constructs the suggestion engine
            var states = new Bloodhound({
                datumTokenizer: Bloodhound.tokenizers.obj.whitespace('value'),
                queryTokenizer: Bloodhound.tokenizers.whitespace,
// `states` is an array of state names defined in "The Basics"
                local: $.map(diseases, function (disease) {
                    return {value: disease};
                })
            });

// kicks off the loading/processing of `local` and `prefetch`
            states.initialize();


            $(document).ready(function () {

                $('#omimid').typeahead({
                    hint: true,
                    highlight: true,
                    minLength: 1
                },
                {
                    name: 'states',
                    displayKey: 'value',
                    // `ttAdapter` wraps the suggestion engine in an adapter that
                    // is compatible with the typeahead jQuery plugin
                    source: states.ttAdapter()
                });
            });
        </script>
    </body>
</html>
